<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="asg4.css">
<script>
      async function addToDB (whichList) {
		        // fetch() returns a promise (i.e. async/does not wait). And when a response comes back from the server,
                        // the associated value can be extracted
			fetch('http://'+window.location.hostname+':8081/{"Username":"'+document.getElementById("Username").value+'","whichList":"'+whichList+'"}')  // send it as encoded JSON string
  .then(response => {
				if (!response.ok) {
      					throw new Error(`Error, response status: ${response.status}`);
    				}
				document.getElementById("Username").value="";
    				return response.text(); // assumes text is returned. If object is returned, use response.json()
  			}).then(data => {
    				// Process the fetched data
				alert(data);
			}).catch(error => {
				// Process any fetch related errors here
    				alert('Error in fetch:', error);
  			});
	}

      function toggle_game_div() {
            if(document.getElementById('game_window').style.display == 'none') {
                  document.getElementById('game_window').style.display = 'flex';
            } else {
                  document.getElementById('game_window').style.display = 'none';    
            }
      }
</script>
</head>
<body>
      <table id="headtable" style="width: 100%;"> <!--creates head table -->
      <tr>
            <!--creates welcome banner and shows it to user-->
            <th colspan="3" style="font-size: 200%;"> <img src="X.png" alt="X" style="height: 40px; float: left;"> THE BEST TIC-TAC-TOE WEBSITE <img src="O.webp" alt="P" style="height: 40px; float: right;" ></th>
      </tr>
      <tr>
            <th colspan="3" style="font-size: 150%; text-align: right; cursor: pointer;" onclick = "alert('logout')">Help | Logout &emsp;</th>
      </tr>

      </table>
      <div id = "main_box">
            <div id = "idols">
                  idols
            </div>
            <div id = "avialable_games">
                  actives
                  <button onclick = "toggle_game_div()"><h1>JOIN</h1></button>
            </div>
      </div>
      <div id = "game_window" style="display:none">
            <div id = "game_info"> 
                  <h1>X: USERNAME &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                  X's TURN &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
                  O: USERNAME</h1>
            </div>
            <div id = "game_contain_squares"> 
                  <div class = "game_squares" name = "1"></div>
                  <div class = "game_squares" name = "2"></div>
                  <div class = "game_squares" name = "3"></div>
                  <div class = "game_squares" name = "4"></div>
                  <div class = "game_squares" name = "5"></div>
                  <div class = "game_squares" name = "6"></div>
                  <div class = "game_squares" name = "7"></div>
                  <div class = "game_squares" name = "8"></div>
                  <div class = "game_squares" name = "9"></div>
            </div>
            <div width="100%" style= "position: fixed; bottom: 10px;">
                  <h1 onclick="toggle_game_div()" style="cursor: pointer;">LEAVE</h1>
            </div>
      </div>

      <div id = "Open_menu" style="display: absolute"> <!-- remove 'none'-->
            <div class="Open_menu-content">
                  <h1 style="text-align: center;">Welcome to the best tic-tac-toe website out There</h1>
                  <h3>Created by Ryan and Bear:</h3>
                  <p> Lorem ipsum dolor sit amet consectetur adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat.
                        In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor. Pulvinar
                        vivamus fringilla lacus nec metus bibendum egestas. 
                        Iaculis massa nisl malesuada lacinia integer nunc posuere.
                        Ut hendrerit semper vel class aptent taciti sociosqu. 
                        Ad litora torquent per conubia nostra inceptos himenaeos. </p>
                  <p>Lorem ipsum dolor sit amet consectetur adipiscing elit.
                        Quisque faucibus ex sapien vitae pellentesque sem placerat. 
                        In id cursus mi pretium tellus duis convallis. Tempus leo eu aenean sed diam urna tempor.
                        Pulvinar vivamus fringilla lacus nec metus bibendum egestas. Iaculis massa nisl malesuada lacinia integer nunc posuere. 
                        Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per conubia nostra inceptos himenaeos</p>
                  <p>Lorem ipsum dolor sit amet consectetur adipiscing elit. 
                        Quisque faucibus ex sapien vitae pellentesque sem placerat. 
                        In id cursus mi pretium tellus duis convallis. 
                        Tempus leo eu aenean sed diam urna tempor. 
                        Pulvinar vivamus fringilla lacus nec metus bibendum egestas. 
                        Iaculis massa nisl malesuada lacinia integer nunc posuere. 
                        Ut hendrerit semper vel class aptent taciti sociosqu. Ad litora torquent per 
                        conubia nostra inceptos himenaeos.Lorem ipsum dolor sit amet consectetur 
                        adipiscing elit. Quisque faucibus ex sapien vitae pellentesque sem placerat.
                  </p>
                        

                  <p>ARE YOU READY?</p>

                  <div>
                  <form onsubmit="document.getElementById('Open_menu').style.display = 'none'; return false;"> <!-- doesnt reload the page and hides the menu -->
                  <label for="Username">Username:</label><br>
                  <input type="text" id="Username"  placeholder="John"><br>

                  <div id= "name_taken" class="err_msg hidden">That Username is already taken. Please try a new name</div>
                  <div id = "empty name" class=" err_msg hidden"> name cannot be null</div>

                  <input type="submit" value="Submit" onclick="addToDB('436db')">
                  </form> 
                  </div>
            </div>
      </div>
</body>
</html>